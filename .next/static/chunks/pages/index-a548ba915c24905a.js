(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7355)}])},558:function(e,t,r){"use strict";r.d(t,{v:function(){return d}});var a=r(5893);r(7294);var s=r(4942),n=r(4055),i=r(9589),l=r(3510),o=r(1108),c=r(5077);function d(e){let{healthData:t}=e,r=e=>{switch(e){case"healthy":return(0,a.jsx)(i.Z,{className:"h-4 w-4 text-green-500"});case"degraded":return(0,a.jsx)(l.Z,{className:"h-4 w-4 text-yellow-500"});case"failed":return(0,a.jsx)(o.Z,{className:"h-4 w-4 text-red-500"});default:return(0,a.jsx)(c.Z,{className:"h-4 w-4 text-gray-500"})}},d=e=>{switch(e){case"healthy":return"success";case"degraded":return"warning";case"failed":return"destructive";default:return"secondary"}},u=e=>{let t=Math.floor(e/86400),r=Math.floor(e%86400/3600),a=Math.floor(e%3600/60);return t>0?"".concat(t,"d ").concat(r,"h"):r>0?"".concat(r,"h ").concat(a,"m"):"".concat(a,"m")},m=t.every(e=>"healthy"===e.status)?"healthy":t.some(e=>"failed"===e.status)?"failed":"degraded";return(0,a.jsxs)(s.Zb,{children:[(0,a.jsxs)(s.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,a.jsx)(s.ll,{className:"text-lg",children:"System Health"}),(0,a.jsx)(n.C,{variant:d(m),children:m})]}),(0,a.jsx)(s.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[r(e.status),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.dataSource}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Last update: ",new Date(e.lastUpdate).toLocaleString()]}),e.errorMessage&&(0,a.jsx)("div",{className:"text-sm text-red-500 mt-1",children:e.errorMessage})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)(n.C,{variant:d(e.status),className:"mb-1",children:e.status}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Uptime: ",u(e.uptime)]})]})]},e.id||e.dataSource))})})]})}},4055:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var a=r(5893);r(7294);var s=r(2003),n=r(9186);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",stale:"border-transparent bg-orange-500 text-white hover:bg-orange-600"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},6485:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var a=r(5893),s=r(7294),n=r(2003),i=r(9186);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:o=!1,...c}=e;return(0,a.jsx)("button",{className:(0,i.cn)(l({variant:s,size:n,className:r})),ref:t,...c})});o.displayName="Button"},4942:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return c},ll:function(){return o}});var a=r(5893),s=r(7294),n=r(9186);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},3909:function(e,t,r){"use strict";r.d(t,{$N:function(){return h},Be:function(){return g},Vq:function(){return o},cN:function(){return f},cZ:function(){return m},fK:function(){return x},hg:function(){return c}});var a=r(5893),s=r(7294),n=r(2854),i=r(1352),l=r(9186);let o=n.fC,c=n.xz,d=n.h_;n.x8;let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});u.displayName=n.aV.displayName;let m=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(n.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[s,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let x=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};x.displayName="DialogHeader";let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};f.displayName="DialogFooter";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});h.displayName=n.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});g.displayName=n.dk.displayName},6489:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(5893),s=r(7294),n=r(9186);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},9186:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(512),s=r(8388);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},7355:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return $}});var a=r(5893),s=r(7294),n=r(9008),i=r.n(n),l=r(3299),o=r(6485),c=r(4942),d=r(4055),u=r(9858),m=r(4672),x=r(5077);function f(e){var t,r;let{metric:s}=e,n="stale"===s.status,i=new Date(s.lastUpdated),l=Math.floor((Date.now()-i.getTime())/36e5);return(0,a.jsxs)(c.Zb,{className:"transition-all hover:shadow-md ".concat(n?"opacity-75 border-orange-200":""),children:[(0,a.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(c.ll,{className:"text-sm font-medium",children:s.name}),(0,a.jsx)(d.C,{variant:(e=>{switch(e){case"healthy":return"success";case"warning":return"warning";case"critical":return"destructive";case"stale":return"stale";default:return"secondary"}})(s.status),children:s.status})]}),(0,a.jsxs)(c.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(t=s.value,"currency"===(r=s.unit)?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(t):"percentage"===r?"".concat(t.toFixed(2),"%"):"".concat(t.toLocaleString()," ").concat(r))}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("div",{className:"flex items-center text-xs text-muted-foreground",children:0!==s.change&&(0,a.jsxs)(a.Fragment,{children:[s.change>0?(0,a.jsx)(u.Z,{className:"h-3 w-3 mr-1 text-green-500"}):(0,a.jsx)(m.Z,{className:"h-3 w-3 mr-1 text-red-500"}),(0,a.jsxs)("span",{className:s.change>0?"text-green-500":"text-red-500",children:[s.changePercent>0?"+":"",s.changePercent.toFixed(1),"%"]})]})}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),n?(0,a.jsxs)("span",{className:"text-orange-500",children:[l,"h ago"]}):(0,a.jsx)("span",{children:l<1?"Just now":"".concat(l,"h ago")})]})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Source: ",s.source]})]})]})}var h=r(9009),g=r(6888),p=r(4195),j=r(3023),y=r(7745),b=r(6224),v=r(9541),N=r(8687),w=r(2799);function S(e){let{title:t,data:r,dataKey:s,color:n="#3b82f6",unit:i="",type:l="line"}=e,o=e=>"currency"===i?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(e):"percentage"===i?"".concat(e.toFixed(2),"%"):e.toLocaleString(),d=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),u=r.map(e=>({...e,timestamp:d(e.timestamp),[s]:e.value}));return(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{children:(0,a.jsx)(c.ll,{className:"text-lg",children:t})}),(0,a.jsx)(c.aY,{children:(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(h.h,{width:"100%",height:"100%",children:"area"===l?(0,a.jsxs)(g.T,{data:u,children:[(0,a.jsx)(p.q,{strokeDasharray:"3 3"}),(0,a.jsx)(j.K,{dataKey:"timestamp",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(y.Q,{fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:o}),(0,a.jsx)(b.u,{formatter:e=>[o(e),t],labelStyle:{color:"#374151"}}),(0,a.jsx)(v.uN,{type:"monotone",dataKey:s,stroke:n,fill:n,fillOpacity:.2,strokeWidth:2})]}):(0,a.jsxs)(N.w,{data:u,children:[(0,a.jsx)(p.q,{strokeDasharray:"3 3"}),(0,a.jsx)(j.K,{dataKey:"timestamp",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(y.Q,{fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:o}),(0,a.jsx)(b.u,{formatter:e=>[o(e),t],labelStyle:{color:"#374151"}}),(0,a.jsx)(w.x,{type:"monotone",dataKey:s,stroke:n,strokeWidth:2,dot:{fill:n,strokeWidth:2,r:4},activeDot:{r:6}})]})})})})]})}var C=r(558),k=r(7536),F=r(3455),D=r(3448),z=r(3909),R=r(8426),Z=r(9186),_=r(9102);let I=(0,r(2003).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),T=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(_.f,{ref:t,className:(0,Z.cn)(I(),r),...s})});T.displayName=_.f.displayName;let L=k.RV,O=s.createContext({}),V=e=>{let{...t}=e;return(0,a.jsx)(O.Provider,{value:{name:t.name},children:(0,a.jsx)(k.Qr,{...t})})},P=()=>{let e=s.useContext(O),t=s.useContext(E),{getFieldState:r,formState:a}=(0,k.Gc)(),n=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},E=s.createContext({}),U=s.forwardRef((e,t)=>{let{className:r,...n}=e,i=s.useId();return(0,a.jsx)(E.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:(0,Z.cn)("space-y-2",r),...n})})});U.displayName="FormItem";let K=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:n,formItemId:i}=P();return(0,a.jsx)(T,{ref:t,className:(0,Z.cn)(n&&"text-destructive",r),htmlFor:i,...s})});K.displayName="FormLabel";let M=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:n,formDescriptionId:i,formMessageId:l}=P();return(0,a.jsx)(R.g7,{ref:t,id:n,"aria-describedby":s?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!s,...r})});M.displayName="FormControl";let B=s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:n}=P();return(0,a.jsx)("p",{ref:t,id:n,className:(0,Z.cn)("text-sm text-muted-foreground",r),...s})});B.displayName="FormDescription";let A=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e,{error:i,formMessageId:l}=P(),o=i?String(null==i?void 0:i.message):s;return o?(0,a.jsx)("p",{ref:t,id:l,className:(0,Z.cn)("text-sm font-medium text-destructive",r),...n,children:o}):null});A.displayName="FormMessage";var Y=r(6489),q=r(1012),W=r(7705),H=r(3718);let J=D.Ry({metricName:D.Z_().min(1,"Metric name is required"),dataSource:D.Z_().min(1,"Data source is required"),thresholdType:D.Km(["absolute","percentage","standard_deviation"]),thresholdValue:D.Rx().min(0,"Threshold must be positive"),comparisonPeriod:D.Rx().min(1,"Comparison period must be at least 1 day"),enabled:D.O7(),channels:D.IX(D.Z_()).min(1,"At least one notification channel is required")});function Q(e){let{configs:t,onSave:r,onDelete:n,onUpdate:i}=e,[l,u]=(0,s.useState)(!1),[m,x]=(0,s.useState)(null),f=(0,k.cI)({resolver:(0,F.F)(J),defaultValues:{metricName:"",dataSource:"",thresholdType:"percentage",thresholdValue:0,comparisonPeriod:7,enabled:!0,channels:["email"]}}),h=e=>{x(e),f.reset({metricName:e.metricName,dataSource:e.dataSource,thresholdType:e.thresholdType,thresholdValue:e.thresholdValue,comparisonPeriod:e.comparisonPeriod,enabled:e.enabled,channels:e.channels||["email"]}),u(!0)};return(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between space-y-0",children:[(0,a.jsx)(c.ll,{className:"text-lg",children:"Alert Configuration"}),(0,a.jsxs)(z.Vq,{open:l,onOpenChange:u,children:[(0,a.jsx)(z.hg,{asChild:!0,children:(0,a.jsxs)(o.z,{size:"sm",children:[(0,a.jsx)(q.Z,{className:"h-4 w-4 mr-2"}),"Add Alert"]})}),(0,a.jsxs)(z.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(z.fK,{children:[(0,a.jsx)(z.$N,{children:m?"Edit Alert Configuration":"Create Alert Configuration"}),(0,a.jsx)(z.Be,{children:"Configure thresholds and notification settings for market metrics."})]}),(0,a.jsx)(L,{...f,children:(0,a.jsxs)("form",{onSubmit:f.handleSubmit(e=>{m?i(m.id,e):r(e),u(!1),x(null),f.reset()}),className:"space-y-4",children:[(0,a.jsx)(V,{control:f.control,name:"metricName",render:e=>{let{field:t}=e;return(0,a.jsxs)(U,{children:[(0,a.jsx)(K,{children:"Metric Name"}),(0,a.jsx)(M,{children:(0,a.jsx)(Y.I,{placeholder:"e.g., weekly_bond_issuance",...t})}),(0,a.jsx)(A,{})]})}}),(0,a.jsx)(V,{control:f.control,name:"dataSource",render:e=>{let{field:t}=e;return(0,a.jsxs)(U,{children:[(0,a.jsx)(K,{children:"Data Source"}),(0,a.jsx)(M,{children:(0,a.jsx)(Y.I,{placeholder:"e.g., bond_issuance",...t})}),(0,a.jsx)(A,{})]})}}),(0,a.jsx)(V,{control:f.control,name:"thresholdValue",render:e=>{let{field:t}=e;return(0,a.jsxs)(U,{children:[(0,a.jsx)(K,{children:"Threshold Value"}),(0,a.jsx)(M,{children:(0,a.jsx)(Y.I,{type:"number",step:"0.01",...t,onChange:e=>t.onChange(parseFloat(e.target.value))})}),(0,a.jsx)(A,{})]})}}),(0,a.jsx)(V,{control:f.control,name:"comparisonPeriod",render:e=>{let{field:t}=e;return(0,a.jsxs)(U,{children:[(0,a.jsx)(K,{children:"Comparison Period (days)"}),(0,a.jsx)(M,{children:(0,a.jsx)(Y.I,{type:"number",...t,onChange:e=>t.onChange(parseInt(e.target.value))})}),(0,a.jsx)(B,{children:"Number of days to compare against for threshold calculation"}),(0,a.jsx)(A,{})]})}}),(0,a.jsxs)(z.cN,{children:[(0,a.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>{u(!1),x(null),f.reset()},children:"Cancel"}),(0,a.jsxs)(o.z,{type:"submit",children:[m?"Update":"Create"," Alert"]})]})]})})]})]})]}),(0,a.jsx)(c.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[t.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:e.metricName}),(0,a.jsx)(d.C,{variant:e.enabled?"success":"secondary",children:e.enabled?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{children:["Source: ",e.dataSource]}),(0,a.jsxs)("div",{children:["Threshold: ",e.thresholdValue," (",e.thresholdType,")"]}),(0,a.jsxs)("div",{children:["Period: ",e.comparisonPeriod," days"]}),(0,a.jsxs)("div",{children:["Channels: ",e.channels?e.channels.join(", "):"None"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.z,{size:"sm",variant:"outline",onClick:()=>h(e),children:(0,a.jsx)(W.Z,{className:"h-4 w-4"})}),(0,a.jsx)(o.z,{size:"sm",variant:"outline",onClick:()=>n(e.id),children:(0,a.jsx)(H.Z,{className:"h-4 w-4"})})]})]},e.id)),0===t.length&&(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No alert configurations found. Create your first alert to get started."})]})})]})}var X=r(2297);function $(){let{data:e,status:t}=(0,l.useSession)(),[r,n]=(0,s.useState)([]),[d,u]=(0,s.useState)({}),[m,x]=(0,s.useState)([]),[h,g]=(0,s.useState)([]),[p,j]=(0,s.useState)([]),[y,b]=(0,s.useState)(!0),[v,N]=(0,s.useState)(new Date);(0,s.useEffect)(()=>{if(e){w();let e=setInterval(w,3e4);return()=>clearInterval(e)}},[e]);let w=async()=>{try{b(!0);let e=await fetch("/api/metrics/current"),t=await e.json();n(t.metrics||[]);let r=await fetch("/api/metrics/historical?days=30"),a=await r.json();u(a.data||{});let s=await fetch("/api/alerts/config"),i=await s.json();x(i.configs||[]);let l=await fetch("/api/system/health"),o=await l.json();g(o.health||[]),N(new Date)}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{b(!1)}},k=async e=>{try{(await fetch("/api/alerts/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&w()}catch(e){console.error("Failed to save alert config:",e)}},F=async(e,t)=>{try{(await fetch("/api/alerts/config/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&w()}catch(e){console.error("Failed to update alert config:",e)}},D=async e=>{try{(await fetch("/api/alerts/config/".concat(e),{method:"DELETE"})).ok&&w()}catch(e){console.error("Failed to delete alert config:",e)}};return"loading"===t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Boom-Bust Sentinel Dashboard"}),(0,a.jsx)("meta",{name:"description",content:"Financial market monitoring dashboard"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"border-b",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Boom-Bust Sentinel"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Last updated: ",v.toLocaleTimeString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:w,disabled:y,children:[(0,a.jsx)(X.Z,{className:"h-4 w-4 mr-2 ".concat(y?"animate-spin":"")}),"Refresh"]}),(0,a.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>(0,l.signOut)(),children:"Sign Out"})]})]})})}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:r.map(e=>(0,a.jsx)(f,{metric:e},e.id))}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:Object.entries(d).map(e=>{var t;let[s,n]=e;return(0,a.jsx)(S,{title:s.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),data:n,dataKey:"value",color:"#3b82f6",unit:null===(t=r.find(e=>e.name.toLowerCase().includes(s.split("_")[0])))||void 0===t?void 0:t.unit,type:"area"},s)})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(C.v,{healthData:h}),(0,a.jsx)(Q,{configs:m,onSave:k,onUpdate:F,onDelete:D})]})]})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,a.jsxs)(c.Zb,{className:"w-[400px]",children:[(0,a.jsx)(c.Ol,{children:(0,a.jsx)(c.ll,{className:"text-center",children:"Boom-Bust Sentinel"})}),(0,a.jsxs)(c.aY,{className:"text-center",children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Sign in to access the financial monitoring dashboard"}),(0,a.jsx)(o.z,{onClick:()=>(0,l.signIn)(),className:"w-full",children:"Sign In"})]})]})})}}},function(e){e.O(0,[281,976,617,892,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);